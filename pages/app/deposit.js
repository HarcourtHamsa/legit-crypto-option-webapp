import React from "react";
import Head from "next/head";
import DashboardWrapper from "../../components/app/DashboardWrapper";
import FloatingButton from "../../components/FloatingButton";
import {
  Box,
  Heading,
  Text,
  SimpleGrid,
  Icon,
  Stack,
  Flex,
  Select,
  useColorModeValue,
  Button,
  FormControl,
  FormLabel,
  Input,
  Modal,
  ModalOverlay,
  ModalContent,
  ModalHeader,
  ModalFooter,
  ModalBody,
  ModalCloseButton,
  useDisclosure,
  Container,
} from "@chakra-ui/react";
import { IoIosAdd } from "react-icons/io";
import WithAuth from "../../HOCs/WithAuth";
import { useFormik } from "formik";
import { useRouter } from "next/router";
import Statistics from "../../components/app/Statistics";
import { TickerTape } from "react-ts-tradingview-widgets";

function Deposit() {
  const { isOpen, onOpen, onClose } = useDisclosure();
  const router = useRouter();

  const formik = useFormik({
    initialValues: {
      amount: "",
    },

    onSubmit: (values) => {
      router.push(
        {
          pathname: "/app/payment",
          query: {
            amount: values.amount,
          },
        },
        "/app/payment"
      );
    },
  });

  return (
    <div>
      <DashboardWrapper>
        <Head>
          <title>Dashboard - Legit Crypto Option</title>
          <meta name="description" content="Generated by create next app" />
          <link rel="icon" href="/favicon.ico" />
        </Head>

        <Statistics />
        <Container
          maxW="7xl"
          mx={"auto"}
          pt={5}
          px={{ base: 2, sm: 12, md: 17 }}
        >
          <TickerTape colorTheme="dark"></TickerTape>

          <Heading
            lineHeight={"110%"}
            fontSize={{ base: "2xl", sm: "2xl", md: "2xl" }}
            mb={5}
            color="white"
            fontWeight="bold"
            // textTransform="uppercase"
            // letterSpacing="2px"
            mt={5}
          >
            {/* <Text>Your deposits</Text> */}
          </Heading>

          <Stack>
            <Button
              color={"white"}
              margin="auto"
              my={10}
              size="lg"
              fontSize="sm"
              fontWeight="bold"
              onClick={onOpen}
              variant="outline"
            >
              Make New Deposit
            </Button>
          </Stack>
        </Container>

        <Modal onClose={onClose} isOpen={isOpen} isCentered>
          <ModalOverlay />
          <ModalContent>
            <form onSubmit={formik.handleSubmit}>
              <ModalHeader fontWeight="bold">Make new deposit</ModalHeader>
              <ModalCloseButton />
              <ModalBody>
                <Stack spacing={4}>
                  <FormControl id="amount">
                    <Input
                      type="text"
                      p={"6"}
                      id="amount"
                      name="amount"
                      placeholder="Enter amount here"
                      onChange={formik.handleChange}
                      value={formik.values.amount}
                    />
                  </FormControl>
                </Stack>
              </ModalBody>

              <ModalFooter>
                <Button
                  onClick={onClose}
                  colorScheme="green"
                  mr={2}
                  fontWeight="normal"
                  type="submit"
                >
                  Continue
                </Button>
                <Button onClick={onClose} colorScheme="red" fontWeight="normal">
                  Close
                </Button>
              </ModalFooter>
            </form>
          </ModalContent>
        </Modal>
      </DashboardWrapper>

      <FloatingButton />
    </div>
  );
}

export default WithAuth(Deposit);
